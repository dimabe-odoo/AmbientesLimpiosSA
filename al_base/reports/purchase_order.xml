<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="custom_purchase_order">
            <t t-call="web.html_container">
                <div class="page">
                    <t t-foreach="docs" t-as="d">
                        <div style="width: 100%;">
                            <div style="width: 49%; height: 120px; display: inline-block;">
                                <table style="margin-left: 60px;">
                                    <tr>
                                        <td colspan="3" style="text-align: center;">
                                            <span t-field="res_company.name" style="font-size: 14px;   font-weight: bold;"/>
                                            <p style="font-size: 10px; " t-field="res_company.l10n_cl_activity_description"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 20%; border: 1px solid">
                                            <img t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)"
                                            style="width: 100px; max-height: 60px"/>
                                        </td>
                                        <td style="width: 60%; font-size: 10px; text-align: center;">
                                            <span t-field="res_company.street"/><br/>
                                            Mesa Central: <span t-field="res_company.phone"/><br/>
                                            E-mail:<span t-field="res_company.email"/><br/>
                                            <span t-field="res_company.website"/>
                                        </td>
                                        <td style="width: 20%; border: 1px solid">
                                            <img t-att-src="'data:image/png;base64,%s' % to_text(res_company.certificate_logo)"
                                            style="width: 100px; max-height: 60px" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div style="width: 50%; display: inline-block;">
                                <table style="border:4px solid; border-color: #ff0000; float: right; width: 60%; height: 120px;">
                                    <tr>
                                        <td style="text-align:center;color:#ff0000; font-weight: bold;">
                                            R.U.T
                                            <span style="color:#ff0000;" t-field="res_company.vat"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:center;color:#ff0000; font-weight: bold;">
                                            ÓRDEN DE COMPRA
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:center;color:#ff0000; font-weight: bold;">
                                            N°
                                            
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <br/>
                        <div style="width:100%;margin:0 auto;border:1px solid; border-radius: 5px; ">
                            <table style="width:98%;margin: 0 auto;font-size:11px; padding: 6px;" cellspacing="1">
                                    <tr>
                                        <td>
                                            <strong>SEÑORES:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-field="d.partner_id.name"/>
                                        </td>
                                        <td style="text-align:left;">
                                            <strong>FECHA:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d %m %Y')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;">
                                            <strong>DIRECCION:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-field="d.partner_id.street"/>
                                        </td>
                                        <td style="text-align:left;">
                                            <strong>COTIZACIÓN:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-esc="d.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;">
                                            <strong>CIUDAD:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-field="d.partner_id.city_id.name"></span>
                                        </td>
                                        <td style="text-align:left;">
                                            <strong>FECHA COT. :</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-esc="d.create_date.date()"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;">
                                            <strong>RUT:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-field="d.partner_id.vat"/>
                                        </td>
                                        <td style="text-align:left;">
                                            <strong>FONO:</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <span t-field="d.partner_id.phone"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        
                                        <td>
                                            <strong>FAX:</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;">
                                            <strong>AT. :</strong>
                                        </td>
                                        <td style="text-align:left;">
                                            <t t-if="d.partner_id.child_ids and len(d.partner_id.child_ids) > 0">
                                                <span t-field="d.partner_id.child_ids[0].name"/>
                                            </t>
                                        </td>
                                    </tr>
                            </table>
                        </div>
                        <div style="width:100%;margin:0 auto;height:600px;border:1px solid; border-radius: 5px; margin-top:4px;">
                            <table style="width:100%;font-size:11px;" cellspacing="0">
                                <tr>
                                    <th style="width:10%;border-right:1px solid;border-bottom:1px solid; padding-top: 6px;">
                                        ITEM
                                    </th>
                                    <th style="width:10%;border-right:1px solid;border-bottom:1px solid; padding-top: 6px;">
                                        CANTIDAD
                                    </th>
                                    <th style="width:60%;border-right:1px solid;border-bottom:1px solid; padding-top: 6px;">
                                        DESCRIPCIÓN
                                    </th>
                                    <th style="width:10%;border-right:1px solid; border-bottom:1px solid;padding-top: 6px;">
                                        VALOR UNIT.
                                    </th>
                                    <th style="width:10%;border-bottom:1px solid;padding-top: 6px;">TOTAL</th>
                                </tr>
                                <t t-foreach="d.order_line" t-as="line">
                                    <tr>
                                        <td></td>
                                        <td><span t-field="line.product_qty"/></td>
                                        <td><span t-field="line.name"/></td>
                                        <td><span t-field="line.price_unit"/></td>
                                        <td><span t-field="line.price_subtotal"/></td>
                                    </tr>
                                </t>
                            </table>
                        </div>
                        <div style="margin-top: 4px; width:100%; height:80px; border:1px solid; border-radius: 5px;">
                            <div style="width:50%; height:80px; float:left;padding-top:2px;">
                                <table style="font-size:11px; padding: 6px;" cellspacing="0">
                                    <tr>
                                        <th style="text-align: left;">FECHA DE ENTREGA</th>
                                        <td style="width: 5px">:</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <th style="text-align: left;">COND. DE VENTA</th>
                                        <td>:</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <th style="text-align: left;">OBSERVACIÓN</th>
                                        <td>:</td>
                                        <td></td>
                                    </tr>
                                </table>
                            </div>

                            <div style="width:48%; float:right;">
                                <table style="font-size:11px; padding: 6px;" cellspacing="0">
                                    <tr>
                                        <th style="border-right: 1px solid;text-align: left; width: 50%">
                                            SUBTOTAL
                                        </th>
                                        <td style="text-align: left;">
                                            <span style="margin-left:4px;">$</span>
                                        </td>
                                        <td style="text-align: right;width:70%;">
                                            <span t-field="d.amount_untaxed"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="border-right: 1px solid;text-align: left">
                                            DESCUENTOS
                                        </th>
                                        <td style="text-align: left;">
                                            <span style="margin-left:4px;">$</span>
                                        </td>
                                        <td style="text-align: right;width:70%;">
                                            <span>0</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="border-right: 1px solid;text-align: left; right;width:30%;">
                                            NETO
                                        </th>
                                        <td style="text-align: left;">
                                            <span style="margin-left:4px;">$</span>
                                        </td>
                                        <td style="text-align: right;width:70%;">
                                            <span t-field="d.amount_untaxed"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="border-right: 1px solid;text-align: left">
                                            19% I.V.A
                                        </th>
                                        <td style="text-align: left;">
                                            <span style="margin-left:4px;">$</span>
                                        </td>
                                        <td style="text-align: right;width:70%;">
                                            <span t-field="d.amount_tax"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="border-right: 1px solid;text-align: left">
                                            TOTAL ORDEN DE COMPRA
                                        </th>
                                        <td style="text-align: left; width:70%;">
                                            <span style="margin-left:4px;">$</span>
                                        </td>
                                        <td style="text-align: right;width:70%;">
                                            <span t-field="d.amount_total"></span>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </t>
                </div>
            </t>
    </template>

    <record id="paper_format_letter_custom" model="report.paperformat">
        <field name="name">Carta Custom</field>
        <field name="default" eval="False"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">0</field>
        <field name="margin_left">15</field>
        <field name="margin_right">15</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
    </record>

    <report id="action_custom_purchase_order" string="Órden de Compra (Custom)" model="purchase.order" report_type="qweb-pdf"
            name="al_base.custom_purchase_order" menu="True" paperformat="paper_format_letter_custom"
    />
</odoo>